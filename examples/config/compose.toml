listen = "0.0.0.0:7000"

backends = [
  { address = "backend-a:9000", http_version = "preserve" },
  { address = "backend-b:9000", http_version = "preserve" }
]

routes = [
  { prefix = "/api", backend = "backend-a:9000", fingerprinting = true },
  { prefix = "/static", backend = "backend-b:9000", fingerprinting = false },
  { prefix = "/",   backend = "backend-b:9000" }
]

[tls]
cert_path = "/config/certs/server.crt"
key_path  = "/config/certs/server.key"
alpn = ["h2", "http/1.1"]
watch_delay_secs = 60

[fingerprint]
tls_enabled = true
http_enabled = true
max_capture = 65536

[logging]
level = "info"
show_target = false

[timeout]
connect_ms = 5000
idle_ms = 60000
shutdown_secs = 30

[timeout.keep_alive]
enabled = true
timeout_secs = 60

[security]
max_connections = 512

[telemetry]
metrics_port = 9090
otel_log_level = "warn"
